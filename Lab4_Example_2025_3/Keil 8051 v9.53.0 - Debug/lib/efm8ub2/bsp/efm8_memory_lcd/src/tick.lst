C51 COMPILER V9.60.0.0   TICK                                                              12/05/2025 11:37:39 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE TICK
OBJECT MODULE PLACED IN .\lib/efm8ub2/bsp/efm8_memory_lcd/src/tick.OBJ
COMPILER INVOKED BY: Z:\home\onachman\SimplicityStudio5\SimplicityStudio_v5\developer\toolchains\keil_8051\9.60\BIN\C51 
                    -/home/onachman/SimplicityStudio/v5_workspace/Lab4_Example_2025_3/lib/efm8ub2/bsp/efm8_memory_lcd/src/tick.c OMF2 SMALL D
                    -EBUG OBJECTEXTEND ROM(LARGE) WARNINGLEVEL(2) FLOATFUZZY(3) OPTIMIZE(8,SPEED) INTVECTOR(0X0000) INTPROMOTE INCDIR(/home/o
                    -nachman/SimplicityStudio/v5_workspace/Lab4_Example_2025_3/inc;/home/onachman/SimplicityStudio/v5_workspace/Lab4_Example_
                    -2025_3/inc/config;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/common/drivers/e
                    -fm8_memory_lcd/inc;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/common/drivers/
                    -efm8_memory_lcd/inc/graphics;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/commo
                    -n/drivers/efm8_memory_lcd/inc/config;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//ki
                    -ts/common/bsp;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/EFM8UB2_SLSTK2001A/c
                    -onfig;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//Device/shared/si8051Base;/home/on
                    -achman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//Device/EFM8UB2/inc;/home/onachman/SimplicityStu
                    -dio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/common/drivers/efm8_joystick;/home/onachman/SimplicityStudio5/
                    -SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/common/drivers/efm8_rgb_led;/home/onachman/SimplicityStudio5/Simpli
                    -cityStudio_v5/developer/sdks/8051/v4.3.1//Device/EFM8UB2/peripheral_driver/inc) PRINT(.\lib/efm8ub2/bsp/efm8_memory_lcd/
                    -src/tick.lst) COND PAGEWIDTH(120) PAGELENGTH(65) OBJECT(.\lib/efm8ub2/bsp/efm8_memory_lcd/src/tick.OBJ)

line level    source

   1          /**************************************************************************//**
   2           * Copyright (c) 2015 by Silicon Laboratories Inc. All rights reserved.
   3           *
   4           * http://developer.silabs.com/legal/version/v11/Silicon_Labs_Software_License_Agreement.txt
   5           *****************************************************************************/
   6          /////////////////////////////////////////////////////////////////////////////
   7          // Tick.c
   8          /////////////////////////////////////////////////////////////////////////////
   9          
  10          /////////////////////////////////////////////////////////////////////////////
  11          // Includes
  12          /////////////////////////////////////////////////////////////////////////////
  13          
  14          #include "bsp.h"
  15          #include "tick.h"
  16          
  17          /////////////////////////////////////////////////////////////////////////////
  18          // Globals
  19          /////////////////////////////////////////////////////////////////////////////
  20          
  21          static volatile uint16_t Ticks = 0;
  22          
  23          /////////////////////////////////////////////////////////////////////////////
  24          // Functions
  25          /////////////////////////////////////////////////////////////////////////////
  26          
  27          //---------------------------------------------------------------------------
  28          // GetTickCount
  29          //---------------------------------------------------------------------------
  30          //
  31          // Description - Return the system up time in milliseconds
  32          //
  33          // return - Number of milliseconds since system start.
  34          //
  35          uint16_t GetTickCount()
  36          {
  37   1          uint16_t ticks;
  38   1      
  39   1          // Disable Timer 3 interrupts
  40   1          EIE1 &= ~EIE1_ET3__BMASK;
  41   1      
  42   1          ticks = Ticks;
C51 COMPILER V9.60.0.0   TICK                                                              12/05/2025 11:37:39 PAGE 2   

  43   1      
  44   1          // Enable Timer 3 interrupts
  45   1          EIE1 |= EIE1_ET3__BMASK;
  46   1      
  47   1          return ticks;
  48   1      }
  49          
  50          //---------------------------------------------------------------------------
  51          // Wait
  52          //---------------------------------------------------------------------------
  53          //
  54          // Description - Wait the specified number of milliseconds
  55          //
  56          // ms - The number of milliseconds to wait
  57          //
  58          void Wait(uint16_t ms)
  59          {
  60   1          uint16_t ticks = GetTickCount();
  61   1      
  62   1          while ((GetTickCount() - ticks) < ms);
  63   1      }
  64          
  65          //-----------------------------------------------------------------------------
  66          // TIMER3_ISR
  67          //-----------------------------------------------------------------------------
  68          //
  69          // TIMER3 ISR Content goes here. Remember to clear flag bits:
  70          // TMR3CN::TF3H (Timer # High Byte Overflow Flag)
  71          // TMR3CN::TF3L (Timer # Low Byte Overflow Flag)
  72          //
  73          //-----------------------------------------------------------------------------
  74          SI_INTERRUPT (TIMER3_ISR, TIMER3_IRQn)
  75          {
  76   1          // Overflows every 1 ms
  77   1          TMR3CN0 &= ~TMR3CN0_TF3H__BMASK;
  78   1      
  79   1          Ticks++;
  80   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     59    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
