C51 COMPILER V9.60.0.0   MAIN                                                              01/10/2026 19:38:49 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\src/main.OBJ
COMPILER INVOKED BY: Z:\home\onachman\SimplicityStudio5\SimplicityStudio_v5\developer\toolchains\keil_8051\9.60\BIN\C51 
                    -/home/onachman/SimplicityStudio/v5_workspace/lab7b_2/src/main.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) WARNINGLEVEL(2)
                    - FLOATFUZZY(3) OPTIMIZE(8,SPEED) INTVECTOR(0X0000) INTPROMOTE INCDIR(/home/onachman/SimplicityStudio/v5_workspace/lab7b_
                    -2/inc;/home/onachman/SimplicityStudio/v5_workspace/lab7b_2/inc/config;/home/onachman/SimplicityStudio5/SimplicityStudio_
                    -v5/developer/sdks/8051/v4.3.1//kits/common/drivers/efm8_memory_lcd/inc;/home/onachman/SimplicityStudio5/SimplicityStudio
                    -_v5/developer/sdks/8051/v4.3.1//kits/common/drivers/efm8_memory_lcd/inc/graphics;/home/onachman/SimplicityStudio5/Simpli
                    -cityStudio_v5/developer/sdks/8051/v4.3.1//kits/common/drivers/efm8_memory_lcd/inc/config;/home/onachman/SimplicityStudio
                    -5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/common/bsp;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/d
                    -eveloper/sdks/8051/v4.3.1//kits/EFM8UB2_SLSTK2001A/config;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer
                    -/sdks/8051/v4.3.1//Device/shared/si8051Base;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.
                    -3.1//Device/EFM8UB2/inc;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/common/dri
                    -vers/efm8_joystick;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//kits/common/drivers/
                    -efm8_rgb_led;/home/onachman/SimplicityStudio5/SimplicityStudio_v5/developer/sdks/8051/v4.3.1//Device/EFM8UB2/peripheral_
                    -driver/inc) PRINT(.\src/main.lst) COND PAGEWIDTH(120) PAGELENGTH(65) OBJECT(.\src/main.OBJ)

line level    source

   1          /*
   2           * -------------------------------------------------------------------------------------
   3           * ‚Äì –¢–∞–∫ —á—Ç–æ –∂–µ? –†–∞–∑–≤–µ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å–∞–º–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ –≤—Ä–∞—á–µ–≤–∞–
             -Ω–∏—è?
   4           *
   5           * –ë—ã–≤–∞–µ—Ç –ª–∏ –≤–æ–æ–±—â–µ –Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω—è—Ç—å –ª—é–±–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –µ—â–µ –∫–∞–
             -∫–∏–º-–Ω–∏–±—É–¥—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º
   6           * –∫–∞—á–µ—Å—Ç–≤–æ–º, –∫–∞–∫ –≥–ª–∞–∑–∞ ‚Äì –∑—Ä–µ–Ω–∏–µ–º, –∞ —É—à–∏ ‚Äì —Å–ª—É—Ö–æ–º? –ù—É–∂–Ω–æ –ª–∏ –
             -ø–æ—ç—Ç–æ–º—É –∫ –ª—é–±–æ–º—É
   7           * –∏—Å–∫—É—Å—Å—Ç–≤—É –¥–æ–±–∞–≤–ª—è—Ç—å –µ—â–µ –∫–∞–∫–æ–µ-–Ω–∏–±—É–¥—å –¥—Ä—É–≥–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ, –
             -∫–æ—Ç–æ—Ä–æ–µ —Ä–µ—à–∞–ª–æ –±—ã,
   8           * —á—Ç–æ –ø—Ä–∏–≥–æ–¥–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∏ —á–µ–º –µ–≥–æ –Ω–∞–¥–æ –≤–æ—Å–ø–æ–ª–Ω–∏—Ç—å?
   9           *
  10           * –†–∞–∑–≤–µ –≤ —Å–∞–º–æ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ —Å–∫—Ä—ã—Ç–æ –∫–∞–∫–æ–µ-—Ç–æ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ –
             -∏ –ª—é–±–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ
  11           * –Ω—É–∂–¥–∞–µ—Ç—Å—è –µ—â–µ –≤ –¥—Ä—É–≥–æ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—Å—É–∂–¥–∞–ª–æ –±—ã, —
             -á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ —Ç–æ–º—É,
  12           * –ø–µ—Ä–≤–æ–º—É? –ê –¥–ª—è —ç—Ç–æ–≥–æ –æ–±—Å—É–∂–¥–∞—é—â–µ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –
             -≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –µ—â–µ
  13           * –¥—Ä—É–≥–æ–µ –ø–æ–¥–æ–±–Ω–æ–≥–æ –∂–µ —Ä–æ–¥–∞ –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ —Ç–∞–∫ –¥–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—
             -Ç–∏?
  14           *
  15           * –ò–ª–∏ –∂–µ –≤—Å—è–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ —Å–∞–º–æ –ø–æ —Å–µ–±–µ —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –¥–ª—è –Ω–µ–≥–æ
             - –ø—Ä–∏–≥–æ–¥–Ω–æ? –ò–ª–∏ –∂–µ –¥–ª—è
  16           * –æ–±—Å—É–∂–¥–µ–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç –µ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏, –µ–º—É –Ω–µ —Ç—Ä–µ–
             -±—É–µ—Ç—Å—è –Ω–∏ —Å–∞–º–æ–≥–æ —Å–µ–±—è,
  17           * –Ω–∏ –¥—Ä—É–≥–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞? –í–µ–¥—å —É –∏—Å–∫—É—Å—Å—Ç–≤–∞ –Ω–µ –±—ã–≤–∞–µ—Ç –Ω–∏–∫–∞–∫–æ–≥
             -–æ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–∞ –∏–ª–∏
  18           * –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏ –∏ –µ–º—É –Ω–µ –≥–æ–¥–∏—Ç—Å—è –∏–∑—ã—Å–∫–∏–≤–∞—Ç—å –ø—Ä–∏–≥–æ–¥–Ω–æ–µ –∑–∞ –ø—Ä–
             -µ–¥–µ–ª–∞–º–∏ —Å–µ–±—è —Å–∞–º–æ–≥–æ.
  19           *
  20           * –†–∞–∑ –æ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤ –Ω–µ–º –Ω–µ—Ç —É—â–µ—Ä–±–∞ –∏ –∏—Å–∫–∞–∂–µ–Ω–∏–π, –ø–æ–∫–∞ –æ–Ω–æ 
             -—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤–æ—é
  21           * –±–µ–∑—É–ø—Ä–µ—á–Ω–æ—Å—Ç—å –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å. –†–∞—Å—Å–º–æ—Ç—Ä–∏ —ç—Ç–æ –≤ —Ç–æ—á–Ω–æ–º, —É—Å—Ç
             -–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º —Ç–æ–±–æ–π
  22           * —Å–º—ã—Å–ª–µ —Å–ª–æ–≤–∞ ‚Äì —Ç–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –∏–ª–∏ –ø–æ-–¥—Ä—É–≥–æ–º—É?
  23           * -------------------------------------------------------------------------------------
  24           */
  25          #include <SI_EFM8UB2_Register_Enums.h>
  26          #include "InitDevice.h"
  27          
  28          // Buttons
  29          SI_SBIT(PB0, SFR_P0, 2); // Button Left
C51 COMPILER V9.60.0.0   MAIN                                                              01/10/2026 19:38:49 PAGE 2   

  30          SI_SBIT(PB1, SFR_P0, 3); // Button Right
  31          
  32          // PWM Values for SG90 Servo (Extended Range: 0.6ms - 2.4ms)
  33          // PCA Clock = 4MHz. Formula: 65536 - (Time_us / 0.25)
  34          #define SERVO_POS_0   63136  // ~0 degrees
  35          #define SERVO_POS_90  59536  // 90 degrees (Center)
  36          #define SERVO_POS_180 55936  // ~180 degrees
  37          
  38          //-----------------------------------------------------------------------------
  39          // Function Prototypes
  40          //-----------------------------------------------------------------------------
  41          void SiLabs_Startup(void);
  42          void Set_Servo_PWM(uint16_t val);
  43          void Delay_ms(uint16_t ms);
  44          
  45          //-----------------------------------------------------------------------------
  46          // SiLabs_Startup (Required to disable Watchdog)
  47          //-----------------------------------------------------------------------------
  48          void SiLabs_Startup (void)
  49          {
  50   1          PCA0MD &= ~0x40; // Disable WDT
  51   1      }
  52          
  53          //-----------------------------------------------------------------------------
  54          // Helper Functions
  55          //-----------------------------------------------------------------------------
  56          void Set_Servo_PWM(uint16_t val)
  57          {
  58   1          PCA0CPL0 = (val & 0x00FF);
  59   1          PCA0CPH0 = (val >> 8);
  60   1      }
  61          
  62          void Delay_ms(uint16_t ms)
  63          {
  64   1          uint16_t i;
  65   1          volatile uint16_t j;
  66   1          for(i = 0; i < ms; i++)
  67   1          {
  68   2              for(j = 0; j < 4000; j++);
  69   2          }
  70   1      }
  71          
  72          //-----------------------------------------------------------------------------
  73          // Main Loop
  74          //-----------------------------------------------------------------------------
  75          void main (void)
  76          {
  77   1          enter_DefaultMode_from_RESET();
  78   1      
  79   1          // Force Settings
  80   1          XBR1 |= 0x40;    // Enable Crossbar
  81   1          PCA0CPM0 = 0xC2; // Enable 16-bit PWM
  82   1          IE_EA = 1;       // Enable Interrupts
  83   1      
  84   1          // Start at Center
  85   1          Set_Servo_PWM(SERVO_POS_90);
  86   1          Delay_ms(500);
  87   1      
  88   1          while (1)
  89   1          {
  90   2              // 1. Check BOTH buttons (Priority: Return to Center)
  91   2              if ((PB0 == 0) && (PB1 == 0))
  92   2              {
C51 COMPILER V9.60.0.0   MAIN                                                              01/10/2026 19:38:49 PAGE 3   

  93   3                  Set_Servo_PWM(SERVO_POS_90);
  94   3                  Delay_ms(50);
  95   3              }
  96   2              // 2. Check Button 0 (Move Left)
  97   2              else if (PB0 == 0)
  98   2              {
  99   3                  Set_Servo_PWM(SERVO_POS_0);
 100   3              }
 101   2              // 3. Check Button 1 (Move Right)
 102   2              else if (PB1 == 0)
 103   2              {
 104   3                  Set_Servo_PWM(SERVO_POS_180);
 105   3              }
 106   2      
 107   2              Delay_ms(20);
 108   2          }
 109   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    126    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
